<?php

use Dingo\Api\Routing\Router;

$api = app(Router::class);
//TODO: fix middleware role & perms
//|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||| |                   | App\Api\V1\Controllers\ResetPasswordController@resetPassword                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | No        | v1         |          |            |
//|adm,cr_dr        | GET|HEAD  | /api/subscriber                                                                                                             |                   | App\Api\V1\Controllers\UserController@getSubscriber                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | No        | v1         |          |            |
//|adm,cr_dr        | POST      | /api/{user_id}/confirm                                                                                                      |                   | App\Api\V1\Controllers\UserController@confirmSubscribe                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | No        | v1         |          |            |
//|adm,cr_dr        | POST      | /api/{user_id}/subscribe                                                                                                    |                   | App\Api\V1\Controllers\UserController@removeSubscribe                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | No        | v1         |          |            |
//|adm|users_index  | GET|HEAD  | /api/users                                                                                                                  | users.index       | App\Api\V1\Controllers\UserController@index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | No        | v1         |          |            |
//|                 | POST      | /api/users                                                                                                                  | users.store       | App\Api\V1\Controllers\UserController@store                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/users/{user}                                                                                                           | users.show        | App\Api\V1\Controllers\UserController@show                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | No        | v1         |          |            |
//|                 | PUT|PATCH | /api/users/{user}                                                                                                           | users.update      | App\Api\V1\Controllers\UserController@update                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | No        | v1         |          |            |
//|                 | DELETE    | /api/users/{user}                                                                                                           | users.destroy     | App\Api\V1\Controllers\UserController@destroy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/customers                                                                                                              | customers.index   | App\Api\V1\Controllers\CustomerController@index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | No        | v1         |          |            |
//|                 | POST      | /api/customers                                                                                                              | customers.store   | App\Api\V1\Controllers\CustomerController@store                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/customers/{customer}                                                                                                   | customers.show    | App\Api\V1\Controllers\CustomerController@show                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | No        | v1         |          |            |
//|                 | PUT|PATCH | /api/customers/{customer}                                                                                                   | customers.update  | App\Api\V1\Controllers\CustomerController@update                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | No        | v1         |          |            |
//|                 | DELETE    | /api/customers/{customer}                                                                                                   | customers.destroy | App\Api\V1\Controllers\CustomerController@destroy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/customers/{customer_id}/projects                                                                                       | projects.index    | App\Api\V1\Controllers\ProjectController@index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | No        | v1         |          |            |
//|                 | POST      | /api/customers/{customer_id}/projects                                                                                       | projects.store    | App\Api\V1\Controllers\ProjectController@store                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/customers/{customer_id}/projects/{project}                                                                             | projects.show     | App\Api\V1\Controllers\ProjectController@show                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | No        | v1         |          |            |
//|                 | PUT|PATCH | /api/customers/{customer_id}/projects/{project}                                                                             | projects.update   | App\Api\V1\Controllers\ProjectController@update                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | No        | v1         |          |            |
//|                 | DELETE    | /api/customers/{customer_id}/projects/{project}                                                                             | projects.destroy  | App\Api\V1\Controllers\ProjectController@destroy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/customers/{customer_id}/projects/{project_id}/tasks                                                                    | tasks.index       | App\Api\V1\Controllers\TaskController@index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | No        | v1         |          |            |
//|                 | POST      | /api/customers/{customer_id}/projects/{project_id}/tasks                                                                    | tasks.store       | App\Api\V1\Controllers\TaskController@store                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/customers/{customer_id}/projects/{project_id}/tasks/{task}                                                             | tasks.show        | App\Api\V1\Controllers\TaskController@show                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | No        | v1         |          |            |
//|                 | PUT|PATCH | /api/customers/{customer_id}/projects/{project_id}/tasks/{task}                                                             | tasks.update      | App\Api\V1\Controllers\TaskController@update                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | No        | v1         |          |            |
//|                 | DELETE    | /api/customers/{customer_id}/projects/{project_id}/tasks/{task}                                                             | tasks.destroy     | App\Api\V1\Controllers\TaskController@destroy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | No        | v1         |          |            |
//|                 | POST      | /api/customers/{customer_id}/projects/{project_id}/tasks/{task_id}/files                                                    |                   | App\Api\V1\Controllers\FileController@storeStepFiles                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/files                      |                   | App\Api\V1\Controllers\FileController@getStepFiles                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | No        | v1         |          |            |
//|                 | POST      | /api/customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/files/{file_id}/approve    |                   | App\Api\V1\Controllers\FileController@approveStepFiles                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | No        | v1         |          |            |
//|                 | POST      | /api/customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/files/{file_id}/disapprove |                   | App\Api\V1\Controllers\FileController@disapproveStepFiles                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | No        | v1         |          |            |
//|                 | POST      | /api/customers/{customer_id}/projects/{project_id}/tasks/{task_id}/dates                                                    |                   | App\Api\V1\Controllers\DateController@storeStepDates                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/dates                      |                   | App\Api\V1\Controllers\DateController@getStepDates                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | No        | v1         |          |            |
//|                 | POST      | /api/customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/dates/{date_id}/approve    |                   | App\Api\V1\Controllers\DateController@approveStepDates                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | No        | v1         |          |            |
//|                 | POST      | /api/customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/dates/{date_id}/disapprove |                   | App\Api\V1\Controllers\DateController@disapproveStepDates                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/templates                                                                                                              | templates.index   | App\Api\V1\Controllers\TemplateController@index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | No        | v1         |          |            |
//|                 | POST      | /api/templates                                                                                                              | templates.store   | App\Api\V1\Controllers\TemplateController@store                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/templates/{template}                                                                                                   | templates.show    | App\Api\V1\Controllers\TemplateController@show                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | No        | v1         |          |            |
//|                 | PUT|PATCH | /api/templates/{template}                                                                                                   | templates.update  | App\Api\V1\Controllers\TemplateController@update                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | No        | v1         |          |            |
//|                 | DELETE    | /api/templates/{template}                                                                                                   | templates.destroy | App\Api\V1\Controllers\TemplateController@destroy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/templates/{template_id}/steps                                                                                          | steps.index       | App\Api\V1\Controllers\StepController@index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | No        | v1         |          |            |
//|                 | POST      | /api/templates/{template_id}/steps                                                                                          | steps.store       | App\Api\V1\Controllers\StepController@store                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/templates/{template_id}/steps/{step}                                                                                   | steps.show        | App\Api\V1\Controllers\StepController@show                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | No        | v1         |          |            |
//|                 | PUT|PATCH | /api/templates/{template_id}/steps/{step}                                                                                   | steps.update      | App\Api\V1\Controllers\StepController@update                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | No        | v1         |          |            |
//|                 | DELETE    | /api/templates/{template_id}/steps/{step}                                                                                   | steps.destroy     | App\Api\V1\Controllers\StepController@destroy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/templates/{template_id}/steps/{detail_id}/details                                                                      | details.index     | App\Api\V1\Controllers\DetailController@index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | No        | v1         |          |            |
//|                 | POST      | /api/templates/{template_id}/steps/{detail_id}/details                                                                      | details.store     | App\Api\V1\Controllers\DetailController@store                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | No        | v1         |          |            |
//|                 | GET|HEAD  | /api/templates/{template_id}/steps/{detail_id}/details/{detail}                                                             | details.show      | App\Api\V1\Controllers\DetailController@show                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | No        | v1         |          |            |
//|                 | PUT|PATCH | /api/templates/{template_id}/steps/{detail_id}/details/{detail}                                                             | details.update    | App\Api\V1\Controllers\DetailController@update                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | No        | v1         |          |            |
//|                 | DELETE    | /api/templates/{template_id}/steps/{detail_id}/details/{detail}                                                             | details.destroy   | App\Api\V1\Controllers\DetailController@destroy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | No        | v1         |          |            |
//|lele             | GET|HEAD  | /api/agencies                                                                                                               |                   | App\Api\V1\Controllers\AgencyController@index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | No        | v1         |          |            |
//|lele             | GET|HEAD  | /api/agencies/{id}                                                                                                          |                   | App\Api\V1\Controllers\AgencyController@show                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | No        | v1         |          |            |
//|lele             | PUT       | /api/agencies/{id}
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

$api->version('v1', function (Router $api) {

    // AUTH ROUTES
    // role: nessuna
    $api->group(['prefix' => 'auth', 'namespace' => 'App\\Api\\V1\\Controllers\\'], function(Router $api) {
        $api->post('agency/signup', 'SignUpController@signUpAsAgency');
        $api->post('signup', 'SignUpController@signUpAsSubscriber');
        $api->post('login', 'LoginController@login');
        $api->post('recovery', 'ForgotPasswordController@sendResetEmail');
        $api->post('reset', 'ResetPasswordController@resetPassword');
    });

    $api->group(['middleware' => 'role:super_su', 'namespace' => 'App\\Api\\V1\\Controllers\\'], function(Router $api) {
        //AGENCIES ROUTES
        $api->get('agencies', 'AgencyController@index');
        $api->get('agencies/{id}', 'AgencyController@show');
        $api->put('agencies/{id}', 'AgencyController@update');
    });

    $api->group(['middleware' => 'role:admin', 'namespace' => 'App\\Api\\V1\\Controllers\\'], function(Router $api) {
        //TEMPLATE ROUTES
        $api->resource('templates', 'TemplateController', ['except' => ['create', 'edit']]);

        //STEP_TEMPLATE ROUTES
        $api->resource('templates/{template_id}/steps', 'StepController', ['except' => ['create', 'edit']]);

        //DETAIL_TEMPLATE ROUTES
        $api->resource('templates/{template_id}/steps/{detail_id}/details', 'DetailController', ['except' => ['create', 'edit']]);
    });

    //SUBSCRIBE ROUTES
    $api->group(['middleware' => ['permission:view_subscribers|confirm_subscribers|delete_subscribers'], 'namespace' => 'App\\Api\\V1\\Controllers\\'], function(Router $api) {
        $api->get('subscriber', 'UserController@getSubscriber');
        $api->post('{user_id}/confirm', 'UserController@confirmSubscribe');
        $api->post('{user_id}/subscription', 'UserController@removeSubscribe');
    });

    //USER ROUTES
    $api->get('users', [
        'middleware' => 'permission:view_users',
        'uses' => 'App\Api\V1\Controllers\UserController@index'
    ]);

    $api->post('users', [
        'middleware' => 'permission:store_users',
        'uses' => 'App\Api\V1\Controllers\UserController@store'
    ]);

    $api->put('users/{user_id}', [
        'middleware' => 'permission:update_users',
        'uses' => 'App\Api\V1\Controllers\UserController@update'
    ]);

    $api->delete('users/{user_id}', [
        'middleware' => 'permission:delete_users',
        'uses' => 'App\Api\V1\Controllers\UserController@destroy'
    ]);

    //CUSTOMER ROUTES
    $api->get('customers', [
        'middleware' => 'permission:view_customers',
        'uses' => 'App\Api\V1\Controllers\CustomerController@index'
    ]);

    $api->post('customers', [
        'middleware' => 'permission:store_customers',
        'uses' => 'App\Api\V1\Controllers\CustomerController@store'
    ]);

    $api->put('customers/{customer_id}', [
        'middleware' => 'permission:update_customers',
        'uses' => 'App\Api\V1\Controllers\CustomerController@update'
    ]);

    $api->delete('customers/{customer_id}', [
        'middleware' => 'permission:delete_customers',
        'uses' => 'App\Api\V1\Controllers\CustomerController@destroy'
    ]);

    //PROJECT ROUTES

    $api->get('customers/{customer_id}/projects', [
        'middleware' => 'permission:view_projects',
        'uses' => 'App\Api\V1\Controllers\ProjectController@index'
    ]);

    $api->post('customers/{customer_id}/projects', [
        'middleware' => 'permission:store_projects',
        'uses' => 'App\Api\V1\Controllers\ProjectController@store'
    ]);

    $api->put('customers/{customer_id}/projects/{project_id}', [
        'middleware' => 'permission:update_projects',
        'uses' => 'App\Api\V1\Controllers\ProjectController@update'
    ]);

    $api->delete('customers/{customer_id}/projects/{project_id}', [
        'middleware' => 'permission:delete_projects',
        'uses' => 'App\Api\V1\Controllers\ProjectController@destroy'
    ]);

    //TASK ROUTES
    $api->get('customers/{customer_id}/projects/{project_id}/tasks', [
        'middleware' => 'permission:view_tasks',
        'uses' => 'App\Api\V1\Controllers\TaskController@index'
    ]);

    $api->post('customers/{customer_id}/projects/{project_id}/tasks', [
        'middleware' => 'permission:store_tasks',
        'uses' => 'App\Api\V1\Controllers\TaskController@store'
    ]);

    $api->put('customers/{customer_id}/projects/{project_id}/tasks/{task_id}', [
        'middleware' => 'permission:update_tasks',
        'uses' => 'App\Api\V1\Controllers\TaskController@update'
    ]);

    $api->delete('customers/{customer_id}/projects/{project_id}/tasks/{task_id}', [
        'middleware' => 'permission:delete_tasks',
        'uses' => 'App\Api\V1\Controllers\TaskController@destroy'
    ]);

    //FILE STEP TASK ROUTES
    $api->post('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/files', [
        'middleware' => 'permission:upload_step_task_files',
        'uses' => 'App\Api\V1\Controllers\FileController@storeStepFiles'
    ]);

    //FILE DELETION STEP TASK ROUTES
    $api->delete('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/files/{file_id}', [
        'middleware' => 'permission:delete_step_task_files',
        'uses' => 'App\Api\V1\Controllers\FileController@deleteStepFiles'
    ]);

    //FILE LIST STEP TASK ROUTE
    $api->get('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/files', [
        'middleware' => 'permission:view_step_task_files',
        'uses' => 'App\Api\V1\Controllers\FileController@getStepFiles'
    ]);

    //FILE APPPROVATION STEP TASK ROUTES
    $api->post('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/files/{file_id}/approve', [
        'middleware' => 'permission:approve_step_task_files',
        'uses' => 'App\Api\V1\Controllers\FileController@approveStepFiles'
    ]);

    //FILE DISAPPROVATION STEP TASK ROUTES
    $api->post('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/files/{file_id}/disapprove', [
        'middleware' => 'permission:disapprove_step_task_files',
        'uses' => 'App\Api\V1\Controllers\FileController@disapproveStepFiles'
    ]);

    //DATE STEP TASK ROUTES
    $api->post('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/dates', [
        'middleware' => 'permission:store_step_task_dates',
        'uses' => 'App\Api\V1\Controllers\DateController@storeStepDates'
    ]);

    //DATE LIST STEP TASK ROUTE
    $api->get('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/dates', [
        'middleware' => 'permission:view_step_task_dates',
        'uses' => 'App\Api\V1\Controllers\DateController@getStepDates'
    ]);

    //DATE CONFIRMATION STEP TASK ROUTES
    $api->post('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/dates/{date_id}/approve', [
        'middleware' => 'permission:approve_step_task_dates',
        'uses' => 'App\Api\V1\Controllers\DateController@approveStepDates'
    ]);

    //DATE DISAPPROVATION STEP TASK ROUTES
    $api->post('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/dates/{date_id}/disapprove', [
        'middleware' => 'permission:disapprove_step_task_dates',
        'uses' => 'App\Api\V1\Controllers\DateController@disapproveStepDates'
    ]);

    //DATE DELETE STEP TASK ROUTES
    $api->delete('customers/{customer_id}/projects/{project_id}/tasks/{task_id}/details/{detail_step_task_id}/dates/{date_id}', [
        'middleware' => 'permission:delete_step_task_dates',
        'uses' => 'App\Api\V1\Controllers\DateController@destroy'
    ]);

    $api->get('refresh', [
        'middleware' => 'jwt.refresh',
        function() {
            return response()->json([
                'message' => 'By accessing this endpoint, you can refresh your access token at each request. Check out this response headers!'
            ]);
        }
    ]);

    $api->group(['middleware' => 'jwt.auth'], function(Router $api) {

        //TENANT TEST
        $api->get('tenant', function() {

            return response()->json([
                'message' => 'This is a tenancy test',
                'tenant' => Landlord::getTenants(),
                'users' => \App\User::where('subscribed', '=', true)->get()
            ]);
        });

        $api->get('protected', function() {
            return response()->json([
                'message' => 'Access to this item is only for authenticated user. Provide a token in your request!'
            ]);
        });


    });
});
